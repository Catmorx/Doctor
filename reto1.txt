
////////////////////////////
TABLE DOCTOR AND CALLS
///////////////////////////
DROP TABLE machine;
DROP SEQUENCE machine_seq;
CREATE TABLE machine(
    ID NUMBER not NULL,
    SPECIALTY VARCHAR2(20) NULL,
    GRADUATE_YEAR NUMBER,
    DEPARTMENT_ID NUMBER,
    NAME VARCHAR2(4000),
    PRIMARY KEY (ID));
SELECT * FROM machine;

create SEQUENCE machine_seq START WITH 1 INCREMENT BY 1;

CREATE OR REPLACE TRIGGER machine_seq_tr
    BEFORE INSERT ON machine FOR EACH ROW
    WHEN(NEW.ID IS NULL)
BEGIN
    SELECT machine_seq.NEXTVAL INTO :NEW.ID FROM DUAL;
END;
***DOCTOR MODULE/TEMPLATE****
GET 
SELECT*FROM machine ORDER BY ID ASC

GET doctor/:id
SELECT*FROM machine WHERE ID=:id

POST
BEGIN
    INSERT INTO machine (ID,SPECIALTY,GRADUATE_YEAR,DEPARTMENT_ID,NAME)VALUES(:id,:specialty,:graduate_year,:department_id,:name);
    :status_code:=201;
END;

PUT
BEGIN
    UPDATE machine SET SPECIALTY=:specialty,GRADUATE_YEAR=:graduate_year,DEPARTMENT_ID=:department_id,NAME=:name WHERE ID=:id;
    :status_code:=201;
END;

DELETE
BEGIN
    DELETE FROM machine WHERE ID=:id;
    :status_code:=204;
END;
////////////////////////////
TABLA CLIENT AND CALLS
///////////////////////////
CREATE TABLE CLIENT(
    ID NUMBER NOT NULL,
    NAME VARCHAR2(4000) NULL,
    EMAIL VARCHAR2(100) NULL,
    AGE NUMBER NULL,
    PRIMARY KEY (ID));

create SEQUENCE client_seq START WITH 1 INCREMENT BY 1;

CREATE OR REPLACE TRIGGER client_seq_tr
    BEFORE INSERT ON client FOR EACH ROW
    WHEN(NEW.ID IS NULL)
BEGIN
    SELECT client_seq.NEXTVAL INTO :NEW.ID FROM DUAL;
END;

***CLIENT MODULE/TEMPLATE***

GET
SELECT * FROM client ORDER BY ID ASC

GET client/:id
SELECT*FROM machine WHERE ID=:id

POST
BEGIN
    INSERT INTO client(ID,NAME,EMAIL,AGE)VALUES(:id,:name,:email,:age);
    :status_code:=201;
END;

PUT
BEGIN
    UPDATE client SET NAME =:name, EMAIL =:email, AGE =:age WHERE ID =:id;
    :status_code:=201;
END;

DELETE
BEGIN
    DELETE FROM client WHERE ID=:id;
    :status_code:=204;
END;

//////////////////////
TABLE MESSAGE AND CALLS
/////////////////////
CREATE TABLE MESSAGE(
    ID NUMBER NOT NULL,
    MESSAGETEXT VARCHAR2(4000) NULL,
    PRIMARY KEY (ID));

create SEQUENCE message_seq START WITH 1 INCREMENT BY 1;

CREATE OR REPLACE TRIGGER message_seq_tr
    BEFORE INSERT ON message FOR EACH ROW
    WHEN(NEW.ID IS NULL)
BEGIN
    SELECT message_seq.NEXTVAL INTO :NEW.ID FROM DUAL;
END;

**MESSAGE MODULE/TEMPLATE**
GET
SELECT*FROM message ORDER BY ID ASC

GET message/:id
SELECT*FROM machine WHERE ID=:id

POST
BEGIN
    INSERT INTO message (ID, MESSAGETEXT)VALUES(:id, :messagetext);
    :status_code:=201;
END;

DELETE
BEGIN
    DELETE FROM MESSAGE WHERE ID=:id;
    :status_code:=204;
END;


